<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Nobwak&#39;s Lair  | Jekyllのセットアップ</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.54.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="Jekyllのセットアップ" />
<meta property="og:description" content="GitHub pagesに記事を投稿するためにJekyllをセットアップした。 その記録。 FreeBSD上で実施しているが、記事中、FreeBSD依存なと" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nobwak.github.io/posts/2019-05-22-jekyll%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97/" />
<meta property="article:published_time" content="2019-05-22T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-05-22T00:00:00&#43;00:00"/>

<meta itemprop="name" content="Jekyllのセットアップ">
<meta itemprop="description" content="GitHub pagesに記事を投稿するためにJekyllをセットアップした。 その記録。 FreeBSD上で実施しているが、記事中、FreeBSD依存なと">


<meta itemprop="datePublished" content="2019-05-22T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-05-22T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="2475">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Jekyllのセットアップ"/>
<meta name="twitter:description" content="GitHub pagesに記事を投稿するためにJekyllをセットアップした。 その記録。 FreeBSD上で実施しているが、記事中、FreeBSD依存なと"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://nobwak.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      Nobwak&#39;s Lair
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">Jekyllのセットアップ</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2019-05-22T00:00:00Z">May 22, 2019</time>      
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<p>GitHub pagesに記事を投稿するためにJekyllをセットアップした。
その記録。</p>

<p>FreeBSD上で実施しているが、記事中、FreeBSD依存なところはほとんどない。</p>

<h2 id="jekyllとは">Jekyllとは</h2>

<p><a href="https://jekyllrb.com/">公式サイト</a>にあるように、Jekyllはプレーンテキストをウェブサイトやブログに変換してくれるツール。Rubyで書かれている。</p>

<p>突然だが。リッチだけど巨大で、しかも動かすにはXAMPPが必要なブログはもう疲れた。</p>

<p>Jekyllはマークダウン形式で記事を作っておけば、コマンド一発でhtmlに変換し、サイトのディレクトリ構造まで作ってくれる。
あとは出来上がったものをwebサーバに丸々アップロードすればよい。</p>

<p>githubにアップロードすれば＜ユーザ名＞.github.ioとしてブログを運営できる。相手はgithubだから「アップロード」というよりもgit pushでできる。プログラムをレポジトリにpushするのと同じ感覚でブログができるのである。</p>

<p>今回はgithub pagesで使う前提のJekyllのセットアップまでを扱うが、そのまえにJekyllの仕組みを確認する。</p>

<h2 id="jekyllによるブログ作成の流れ">Jekyllによるブログ作成の流れ</h2>

<p>Jekyllは前項で書いた通り、マークダウン形式のテキストファイルをhtmlに変換し、ディレクトリ構成を作る。
具体的には;</p>

<ol>
<li>Jekyllの作業ディレクトリを作る</li>
<li>そこにマークダウン形式のテキストファイルを入れていく。</li>
<li>変換コマンドを実行</li>
<li>変換後ファイルの入ったディレクトリが作られる</li>
<li>ディレクトリをそのままアップロードしてもよいが;</li>
<li>確認コマンドを実行すると、ローカルホストでウェブサーバが立ち上がり見た目を確認できる。</li>
</ol>

<p>というものである。
ではさっそく。</p>

<h2 id="jekyll-bundlerのインストール">jekyll, bundlerのインストール</h2>

<p>jekyllはRubyで動く。また、記事中にもあるとおりjekyllの構成を変えるのでbundlerも必要。</p>

<p>インストールはpkgでどうぞ。
Rubyやらなにやら、いっぱい友達を連れてくるので、コンテナ等、隔離した環境で作るのオススメ。私はJail上に作った。</p>

<h2 id="記事を置く作業フォルダを作る">記事を置く作業フォルダを作る。</h2>

<p>jekyll new &lt;path&gt; でJekyllのフォルダを作る。</p>

<pre><code class="language-console">$ jekyll new article/
Running bundle install in /usr/home/bot/article...
  Bundler: Don't run Bundler as root. Bundler can ask for sudo if it is needed, and
  Bundler: installing your bundle as root will break this application for all non-root
  Bundler: users on this machine.
  Bundler: The dependency tzinfo-data (&gt;= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run `bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java`.
  Bundler: Fetching gem metadata from https://rubygems.org/...........
  Bundler: Fetching gem metadata from https://rubygems.org/.
  Bundler: Resolving dependencies...
  Bundler: Using public_suffix 3.0.3
  Bundler: Using addressable 2.6.0
  Bundler: Using bundler 1.17.1
  Bundler: Using colorator 1.1.0
  Bundler: Using concurrent-ruby 1.1.5
  Bundler: Using eventmachine 1.2.7
  Bundler: Using http_parser.rb 0.6.0
  Bundler: Using em-websocket 0.5.1
  Bundler: Fetching ffi 1.11.1
  Bundler: Installing ffi 1.11.1 with native extensions
  Bundler: Using forwardable-extended 2.6.0
  Bundler: Using i18n 1.6.0
  Bundler: Using rb-fsevent 0.10.3
  Bundler: Using rb-inotify 0.10.0
  Bundler: Using sass-listen 4.0.0
  Bundler: Using sass 3.7.4
  Bundler: Using jekyll-sass-converter 1.5.2
  Bundler: Using ruby_dep 1.5.0
  Bundler: Using listen 3.1.5
  Bundler: Using jekyll-watch 2.2.1
  Bundler: Using kramdown 1.17.0
  Bundler: Using liquid 4.0.3
  Bundler: Using mercenary 0.3.6
  Bundler: Using pathutil 0.16.2
  Bundler: Using rouge 3.3.0
  Bundler: Using safe_yaml 1.0.5
  Bundler: Using jekyll 3.8.5
  Bundler: Using jekyll-feed 0.12.1
  Bundler: Using jekyll-seo-tag 2.6.1
  Bundler: Using minima 2.5.0
  Bundler: Bundle complete! 4 Gemfile dependencies, 29 gems now installed.
  Bundler: Use `bundle info [gemname]` to see where a bundled gem is installed.
New jekyll site installed in /usr/home/bot/article.
</code></pre>

<p>できあがったディレクトリ構成は以下の通り。</p>

<pre><code class="language-bash">.
├── _config.yml
├── _posts
├── 404.html
├── about.md
├── Gemfile
├── Gemfile.lock
└── index.md
</code></pre>

<p>_config.ymlは設定ファイル。記事を入れていくのは_posts。</p>

<p>_postsの中を眺めれば2019-05-22-welcome-to-jekyll.markdownというような名前でサンプルファイルが一つ入っているはずである。
記事を作る場合には、このサンプルのようなファイル名の形式でファイルを置く。
ファイルの内容についてはまた後で。</p>

<h2 id="初期設定">初期設定</h2>

<h3 id="config-ymlを更新">_config.ymlを更新</h3>

<p>最後の4行以外を適当に。基本情報を決める。</p>

<pre><code class="language-yaml">title: &quot;nobwak's Lair&quot;
email: your-email@example.com
description: &gt;- # this means to ignore newlines until &quot;baseurl:&quot;
  nobwakの七転八倒log
baseurl: &quot;&quot; # the subpath of your site, e.g. /blog
url: &quot;https://nobwak.github.io&quot; # the base hostname &amp; protocol for your site, e.g. http://example.com
twitter_username: nobwak
github_username: nobwak

markdown: kramdown
theme: minima
plugins:
  - jekyll-feed
</code></pre>

<h3 id="gemfileを更新し-bundle-update">Gemfileを更新し、bundle update</h3>

<p>「GitHub pageを使いたいなら」との指示通りに更新。</p>

<p>gem jekyllの行をコメントアウト、github-pagesの行をアンコメント。</p>

<pre><code class="language-console"># This will help ensure the proper Jekyll version is running.
# Happy Jekylling!
# gem &quot;jekyll&quot;, &quot;~&gt; 3.8.5&quot; (この行をコメントアウト)
&lt;略&gt;
# If you want to use GitHub Pages, remove the &quot;gem &quot;jekyll&quot;&quot; above and
# uncomment the line below. To upgrade, run `bundle update github-pages`.
gem &quot;github-pages&quot;, group: :jekyll_plugins # この行を生かす
</code></pre>

<p>更新したらこちらも指示通りにbundle update</p>

<pre><code class="language-console">$ bundle update
The dependency tzinfo-data (&gt;= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run `bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java`.
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/.
Resolving dependencies................................
Using concurrent-ruby 1.1.5
Using i18n 0.9.5 (was 1.6.0)
(略)
Using github-pages 198
Bundle updated!
</code></pre>

<p>準備完了。</p>

<h2 id="ビルド-変換-のテスト">ビルド（変換）のテスト</h2>

<p>ではビルド。
bundle exec jekyll buildとする。これでhtmlに変換する。<br />
注意: 日本語を扱うなら文字コードは<code>ja_JP-UTF8</code>にしておくこと。</p>

<pre><code class="language-console">$ bundle exec jekyll build
Configuration file: /usr/home/bot/files/temp/tryout/_config.yml
            Source: /usr/home/bot/files/temp/tryout
       Destination: /usr/home/bot/files/temp/tryout/_site
 Incremental build: disabled. Enable with --incremental
      Generating...
       Jekyll Feed: Generating feed for posts
                    done in 1.344 seconds.
 Auto-regeneration: disabled. Use --watch to enable.
</code></pre>

<p>メッセージの通り新しく_siteというディレクトリができる。これが変換後の公開用ディレクトリ。</p>

<pre><code class="language-console">
.
├── _config.yml
├── _posts
├── _site
├── 404.html
├── about.md
├── Gemfile
├── Gemfile.lock
└── index.md
</code></pre>

<p>_siteの中身はこうなっている。</p>

<pre><code class="language-console">
.
├── 404.html
├── about
│   └── index.html
├── assets
│   ├── main.css
│   └── minima-social-icons.svg
├── feed.xml
├── index.html
└── jekyll
   └── update
       └── 2019
           └── 05
               └── 22
                   └── welcome-to-jekyll.html
</code></pre>

<p>_postsの中にあったサンプルファイルがhtmlに変換され、年・月・日のディレクトリに置かれているのが分かる。</p>

<p>さらにindex.htmlの中身を見ると、以下のようにサンプルファイルへのリンクも書かれている。</p>

<pre><code class="language-html">    &lt;ul class=&quot;post-list&quot;&gt;&lt;li&gt;&lt;span class=&quot;post-meta&quot;&gt;May 22, 2019&lt;/span&gt;
        &lt;h3&gt;
          &lt;a class=&quot;post-link&quot; href=&quot;/jekyll/update/2019/05/22/welcome-to-jekyll.html&quot;&gt;
            Welcome to Jekyll!
          &lt;/a&gt;
        &lt;/h3&gt;&lt;/li&gt;&lt;/ul&gt;
</code></pre>

<p>つまりJekyllは、_postsの中にあるファイルをhtmlに変換し、インデックスページとリンク構造も作ったうえで_site下に配置してくれる、ということ。
GitHub Pagesにアップロードするときには、ここの_siteから下をgit pushすれば良い。</p>

<p>ただ、git pushするといきなり公開されるので、その前に実際の見た目を確認したいということなら、そのための仕組みも用意されている。
Jekyllのトップディレクトリでjekyll serveとすればよい。</p>

<pre><code class="language-ruby">$ bundle exec jekyll serve
Configuration file: /usr/home/bot/files/temp/tryout/_config.yml
            Source: /usr/home/bot/files/temp/tryout
       Destination: /usr/home/bot/files/temp/tryout/_site
 Incremental build: disabled. Enable with --incremental
      Generating...
       Jekyll Feed: Generating feed for posts
                    done in 1.435 seconds.
  Please add the following to your Gemfile to avoid polling for changes:
    require 'rbconfig'
    if RbConfig::CONFIG['target_os'] =~ /(?i-mx:bsd|dragonfly)/
      gem 'rb-kqueue', '&gt;= 0.2'
    end
 Auto-regeneration: enabled for '/usr/home/bot/files/temp/tryout'
    Server address: http://127.0.0.1:4000/
  Server running... press ctrl-c to stop.
</code></pre>

<p>この状態でローカルホストの4000に繋げば、見た目を確認できる。
画像あり　36
画像あり　37</p>

<p>これでJekyllのセットアップはおしまい。</p>
<ul class="pa0">
  
</ul>
<div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://nobwak.github.io/" >
    &copy; 2019 Nobwak&#39;s Lair
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
